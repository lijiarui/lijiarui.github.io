<!DOCTYPE HTML>
<html class="no-js" lang="zh-CN">
<!--
//                            _ooOoo_
//                           o8888888o
//                           88" . "88
//                           (| -_- |)
//                            O\ = /O
//                        ____/`---'\____
//                      .   ' \\| |// `.
//                       / \\||| : |||// \
//                     / _||||| -:- |||||- \
//                       | | \\\ - /// | |
//                     | \_| ''\---/'' | |
//                      \ .-\__ `-` ___/-. /
//                   ___`. .' /--.--\ `. . __
//                ."" '< `.___\_<|>_/___.' >'"".
//               | | : `- \`.;`\ _ /`;.`/ - ` : | |
//                 \ \ `-. \_ __\ /__ _/ .-` / /
//         ======`-.____`-.___\_____/___.-`____.-'======
//                            `=---='
//                 拦截插件累计拦截逗比攻击"1381438"次！
//         .............................................
//                  佛祖保佑             永无BUG
//          佛曰:
//                  写字楼里写字间，写字间里程序员；
//                  程序人员写程序，又拿程序换酒钱。
//                  酒醒只在网上坐，酒醉还来网下眠；
//                  酒醉酒醒日复日，网上网下年复年。
//                  但愿老死电脑间，不愿鞠躬老板前；
//                  奔驰宝马贵者趣，公交自行程序员。
//                  别人笑我忒疯癫，我笑自己命太贱；
//                  不见满街漂亮妹，哪个归得程序员？
-->
<head><meta name="generator" content="Hexo 3.8.0">
    <!--[if lte IE 9]>
<meta http-equiv="refresh" content="0;url=http://lijiarui.github.io/warn.html">
<![endif]-->
<meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
<meta http-equiv="mobile-agent" content="format=html5; url=http://lijiarui.github.io">
<meta name="author" content="Li jiarui">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/SimpleStyle.min.css">

<link rel="shortcut icon" href="/images/favicon.png">


<title>chatbot framework-wechaty - 李佳芮de博客</title>

<meta name="keywords" content="chatbot, 技术博客, 聊天机器人, 人工智能, 创业">

<meta name="description " content="Wechaty is a easy to use ChatBot Framework which can help you write the worlds smallest chatbot. Maybe you are very interesting in ChatBot industory, or you just want to get your own wechat personal account robot, Wechaty will always be your friend.">
</head>
<body>
<div id="nav">
    <nav class="nav-menu">
        <a class="site-name current" href="/" title="芮">芮</a>
        <a class="site-index current" href="/"><i class="fa fa-home"></i><span>首页</span></a>
        <a href="/archives" title="归档"><i class="fa fa-archives"></i><span>归档</span></a>
        <a href="/tags" title="标签"><i class="fa fa-tags"></i><span>标签</span></a>
        <!-- custom single page of menus -->
        
        
        <a href="/about" title="关于本站">
            <i class="fa fa-user"></i>
            <span>关于本站</span>
        </a>
        
    </nav>
</div>

<div class="nav-user">
    <a class="btn-search" href="#"><i class="fa fa-search"></i></a>
    <a class="btn-read-mode" href="#"><i class="fa fa-sun-o"></i></a>
    <a class="btn-sns-qr" href="javascript:"><i class="fa fa-telegram"></i></a>
</div>

<div id="wrapper" class="clearfix">
    <div id="body">
        <div class="main" id="main">
            <div id="cover">
    <div class="cover-img"></div>
    <div class="cover-info">
        
        <h1 class="cover-siteName">李佳芮の博客</h1>
        <h3 class="cover-siteTitle">时间看得见</h3>
        <p class="cover-siteDesc">一个现实的理想主义者</p>
        <div class="cover-sns">
            
            <div class="btn btn-weibo">
                <a href="https://weibo.com/u/2175505900?refer_flag=1001030101_" target="_blank" title="weibo" ref="friend">
                    <i class="fa fa-weibo"></i>
                </a>
            </div>
            
            <div class="btn btn-weixin">
                <a href="http://blog.botorange.com" target="_blank" title="weixin" ref="friend">
                    <i class="fa fa-weixin"></i>
                </a>
            </div>
            
            <div class="btn btn-github">
                <a href="https://github.com/lijiarui" target="_blank" title="github" ref="friend">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            
            <div class="btn btn-telegram">
                <a href="https://www.jianshu.com/u/ac5aaa7ad293" target="_blank" title="telegram" ref="friend">
                    <i class="fa fa-telegram"></i>
                </a>
            </div>
            
        </div>
    </div>
</div>
            <div class="page-title">
    <ul>
        <li><a href="/">最新</a></li>
        
            
                <li class="">
                    <a href="/categories/chatbot" data-name="chatbot">chatbot</a>
                </li>
            
                <li class="active">
                    <a href="/categories/project" data-name="project">project</a>
                </li>
            
                <li class="">
                    <a href="/categories/presentation" data-name="presentation">presentation</a>
                </li>
            
                <li class="">
                    <a href="/categories/thought" data-name="thought">thought</a>
                </li>
            
                <li class="">
                    <a href="/categories/tech" data-name="技术">技术</a>
                </li>
            
                <li class="">
                    <a href="/categories/reading" data-name="读书">读书</a>
                </li>
            
        
        <li class="page-search">
    <form id="search" class="search-form">
        <label for="s" class="sr-only">请输入关键字</label>
        <input class="search-field" type="text" name="s" placeholder="请输入关键字">
        <button type="submit" class="search-form-submit" title="搜索"><i class="fa fa-search"></i></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
</li>

    </ul>
</div>
<div class="main-inner">
    <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div class="post-header">
            <div class="post-author clearfix">
                <a class="avatar fleft" href="https://www.botorange.com" target="_blank">
                    <img width="48" src="/images/avatar.jpg" alt="avatar">
                </a>
                <p><span class="label">作者</span>
                    <a href="https://blog.botorange.com" target="_blank">李佳芮</a>
                    <span title="最后编辑于2016-10-01">2016-10-01</span>
                </p>
                <p>一个现实的理想主义者</p>
            </div>
            <h2 class="post-title">ChatBot Framework-Wechaty</h2>
            <div class="post-meta">
                本文总共2619个字 | 您是第<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>位看到它们的小伙伴
            </div>
        </div>
        <div class="post-content markdown-body">
            <p><img src="https://raw.githubusercontent.com/Chatie/wechaty/master/docs/images/wechaty-logo-en.png" alt="Wechaty Logo"></p>
<p>Hello, ChatBot Developers!</p>
<p>Wechaty is a easy to use <strong>ChatBot Framework</strong> which can help you write <strong>the worlds smallest chatbot</strong>. Maybe you are very interesting in ChatBot industory, or you just want to get your own wechat personal account robot, Wechaty will always be your friend.</p>
<p>Visit Wechaty Github: <a href="https://github.com/chatie/wechaty" target="_blank" rel="noopener">https://github.com/chatie/wechaty</a><br>Visit Wechaty Blog: <a href="http://blog.chatie.io/" target="_blank" rel="noopener">http://blog.chatie.io/</a></p>
<p>In this video, I will show you how to getting started with Wechaty through a 10 minutes live coding tutorial, with Wechaty Docker Runtime. (Event Node.js Party #18, Beijing)</p>
<p>For visiters come from China who can not visit YouTube.com, this video is also hosted on YouKu.com &amp; Tencent Video</p>
<div class="video-container" style="
    position: relative;
    padding-bottom:56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
"><br><iframe width="560" height="315" src="https://www.youtube.com/embed/IUDuxHaV9bQ?start=85" frameborder="0" allowfullscreen style="
    position: absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
"></iframe></div>

<ul>
<li><a href="http://v.youku.com/v_show/id_XMTkyNDgzMjY5Ng==.html" target="_blank" rel="noopener">Getting Started with Wechaty @ YouKu</a></li>
<li><a href="https://v.qq.com/x/page/b0363p9kg3q.html" target="_blank" rel="noopener">Getting Started with Wechaty @ Tencent</a></li>
</ul>
<p>Learn more about how to use Wechaty: <a href="https://github.com/wechaty/wechaty/wiki/GettingStarted" target="_blank" rel="noopener">https://github.com/wechaty/wechaty/wiki/GettingStarted</a></p>
<p>Code in the video:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;Wechaty, Room&#125; <span class="keyword">from</span> <span class="string">'wechaty'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = Wechaty.instance()</span><br><span class="line"></span><br><span class="line">bot</span><br><span class="line">.on(<span class="string">'scan'</span>, <span class="function">(<span class="params">url, code</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> loginUrl = url.replace(<span class="string">'qrcode'</span>, <span class="string">'l'</span>)</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'qrcode-terminal'</span>).generate(loginUrl)</span><br><span class="line">    <span class="built_in">console</span>.log(url)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">.on(<span class="string">'login'</span>, <span class="function"><span class="params">user</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;user&#125;</span> login`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">.on(<span class="string">'friend'</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">contact, request</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(request)&#123;</span><br><span class="line">        <span class="keyword">await</span> request.accept()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Contact: <span class="subst">$&#123;contact.name()&#125;</span> send request <span class="subst">$&#123;request.hello&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">.on(<span class="string">'message'</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> contact = m.from()</span><br><span class="line">    <span class="keyword">const</span> content = m.content()</span><br><span class="line">    <span class="keyword">const</span> room = m.room()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(room)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Room: <span class="subst">$&#123;room.topic()&#125;</span> Contact: <span class="subst">$&#123;contact.name()&#125;</span> Content: <span class="subst">$&#123;content&#125;</span>`</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Contact: <span class="subst">$&#123;contact.name()&#125;</span> Content: <span class="subst">$&#123;content&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(m.self())&#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/hello/</span>.test(content))&#123;</span><br><span class="line">        m.say(<span class="string">"hello how are you"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/room/</span>.test(content))&#123;</span><br><span class="line">        <span class="keyword">let</span> keyroom = <span class="keyword">await</span> Room.find(&#123;topic: <span class="string">"test"</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span>(keyroom)&#123;</span><br><span class="line">            <span class="keyword">await</span> keyroom.add(contact)</span><br><span class="line">            <span class="keyword">await</span> keyroom.say(<span class="string">"welcome!"</span>, contact)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/out/</span>.test(content))&#123;</span><br><span class="line">        <span class="keyword">let</span> keyroom = <span class="keyword">await</span> Room.find(&#123;topic: <span class="string">"test"</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span>(keyroom)&#123;</span><br><span class="line">            <span class="keyword">await</span> keyroom.say(<span class="string">"Remove from the room"</span>, contact)</span><br><span class="line">            <span class="keyword">await</span> keyroom.del(contact)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">.init()</span><br></pre></td></tr></table></figure>
<p>docker command:    </p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -ti <span class="attribute">--volume</span>=<span class="string">"<span class="variable">$(pwd)</span>"</span>:/bot --rm zixia/wechaty mybot.ts</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/lijiarui/Getting-Started-with-Wechaty---Live-Coding-Tutorial" title="Click here to get the repo" target="_blank" rel="noopener">Click here to get the repo</a></p>

        </div>
        <div class="post-tool">
            <a class="btn-thumbs-up" href="javascript:void(0);" data-cid="52" title="95">
                <i class="fa fa-thumbs-up" aria-hidden="true"></i> 打赏
            </a>
        </div>
        
        <div class="post-tags">标签：
            
            <a href="/tags/wechaty/">wechaty</a>
            
        </div>
        
    </article>
    
    <p>本文代表个人观点，内容仅供参考。若有不恰当之处，望不吝赐教！</p>
    
    
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_config = function () {
        this.page.url = 'http://lijiarui.github.io/project/2016-10-01-project-wechaty.html';
        this.page.identifier = 'project/2016-10-01-project-wechaty.html';
    };
    (function () { // DON'T EDIT BELOW THIS LINE
        var d = document, disqus_shortname = 'lijiarui', s = d.createElement('script');
        s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>

</div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        </div><!-- end #main-->
    </div><!-- end #body -->
    <footer class="footer">
    <div class="footer-inner">
        <p>
            <a href="/about" title="关于本站">关于本站</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp
            <!-- 自定义链接 -->
            <a href="/help" title="help">急救中心</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp
            <a href="/links" title="友情链接">友情链接</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp
            <a href="/app" title="App下载">App下载</a>
        </p>
        <p>
            本站点采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>，已建立<a href="/timeline" id="siteBuildingTime"></a>天<br>
            ©2017 基于<a href="http://hexo.io" target="_blank">Hexo</a>搭建
            ，主题&nbsp<a href="https://github.com/tangkunyin/hexo-theme-jsimple" target="_blank">JSimple</a>
            ，作者<a href="https://www.tangkunyin.com" target="_blank">唐先森</a>
            ，Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>
        </p>
        <!--  -->
<!-- Tencent Analytics -->
<!-- <script type="text/javascript" src="//tajs.qq.com/stats?sId=65330142" charset="UTF-8"></script> -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114589636-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114589636-1');
</script>

<!--  -->

    </div>
</footer>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script src="/js/InsightSearch.js"></script>
<script src="/js/SimpleCore.js"></script>

</div>
<div class="fixed-btn">
    <a class="btn-gotop" href="javascript:"> <i class="fa fa-angle-up"></i></a>
</div>
<script>
    $(function () {
        SimpleCore.init({
            buildingTime: '01/20/2018',
            current: $('.post-tags').length > 0 ? 'post' : 'archive',
            snsQRCode: '/images/sns-qrcode.png',
            donateImg: '/images/donate-qr.png',
        });
    });
</script>
</body>
</html>
